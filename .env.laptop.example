# ================================================
# üñ•Ô∏è  LAPTOP PROFILE (8GB VRAM)
# ================================================
# Copy this file to .env and adjust as needed
# Usage: HARDWARE_PROFILE=laptop or let auto-detect

HARDWARE_PROFILE=laptop

# ================================================
# Hardware Configuration
# ================================================
MAX_VRAM_GB=6.5
DEVICE=cuda
TORCH_DTYPE=float16

# ================================================
# Model Settings - Optimized for 8GB VRAM
# ================================================

# Whisper ASR (~3GB with int8)
WHISPER_MODEL=mobiuslabsgmbh/faster-whisper-large-v3-turbo
WHISPER_DEVICE=cuda
WHISPER_COMPUTE_TYPE=int8
WHISPER_BATCH_SIZE=1

# Qwen2-VL Vision Model (~2.5GB with 4bit)
QWEN_MODEL_PATH=models/qwen2-vl-2b
QWEN_MAX_PIXELS=151200
QWEN_MIN_PIXELS=50176
QWEN_BATCH_SIZE=1
QWEN_USE_FLASH_ATTENTION=false
QWEN_COMPILE=false

# Ollama LLM (~4GB with q4_K_M)
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=qwen2.5:7b-instruct-q4_K_M
LLAMA_MAX_LENGTH=4096
LLAMA_TEMPERATURE=0.7

# ================================================
# Processing Settings - Conservative
# ================================================
PRELOAD_ALL_MODELS=false
UNLOAD_MODELS_AFTER_USE=true
FRAME_EXTRACTION_FPS=0.1
MAX_FRAMES_PER_VIDEO=100
FRAME_BATCH_SIZE=1
QUIZ_BATCH_SIZE=1

# Video limits
MAX_VIDEO_SIZE_MB=500
MAX_VIDEO_DURATION_MINUTES=60
MIN_SEGMENT_DURATION=30
MAX_SEGMENT_DURATION=300

# Quiz settings
QUIZZES_PER_SEGMENT=2
QUIZ_OPTIONS_COUNT=4

# ================================================
# Database
# ================================================
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/vier
DATABASE_ECHO=false

# ================================================
# Redis
# ================================================
REDIS_URL=redis://localhost:6379/0
REDIS_CACHE_TTL=3600

# ================================================
# S3/MinIO Storage
# ================================================
S3_ENABLED=true
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=vier-videos
S3_REGION=us-east-1
S3_USE_SSL=false
S3_SIGNED_URL_EXPIRY=3600

# ================================================
# API Settings
# ================================================
API_V1_PREFIX=/api
PROJECT_NAME=AI Video Quiz Generator
DEBUG=false
HOST=0.0.0.0
PORT=8000

# Task management
TASK_TIMEOUT_SECONDS=3600
CLEANUP_TEMP_FILES_AFTER_SECONDS=86400

# YouTube download
YT_DLP_FORMAT=bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best
YT_DLP_MAX_FILESIZE=500M
